# **智能评分系统 UI 改进方案与交互逻辑重构**

## **1\. 现状分析 (基于上传的 UI 截图)**

你当前的 UI 设计主要针对的是 **“采点给分”** (Points-based Grading) 模式，这在历史、政治等文科材料题中非常常见。

### **✅ 优点 (Keep)**

* **策略分离:** 明确了“评分策略”与“具体得分点”的分离（如“任选 N 点”）。  
* **结构化数据:** 试图将答案拆解为条目（3-3, 3-4），而不是一整段文本，有利于 AI 逐条验证。  
* **规则前置:** 有“补充规则”和“包含关键词”的配置项，尝试引入逻辑判断。

### **⚠️ 痛点与风险 (Improve)**

1. **分值逻辑冲突:** 上方设置了“每点分值 2 分”，但下方列表项中又有独立的“0”分输入框。如果这两个冲突了以谁为准？  
2. **语义模糊:** “开放模式（言之有理即得分）”是一个黑盒。如果勾选了，AI 该依据什么标准判断“有理”？缺少**参考维度**（如：符合史实、逻辑自洽）。  
3. **颗粒度不足:** 列表中的文本框（如“加强科技创新...”）既是**标准答案**，又是**AI 匹配依据**。  
   * *问题:* 学生可能回答意思相同但措辞完全不同的句子。如果仅靠这段文本做 embedding 匹配，准确率不稳定。  
   * *改进:* 需要区分 **“展示给学生的标准答案”** 和 **“给 AI 看的语义核心”**。  
4. **负面规则弱化:** “补充规则”在最底部且较简单。对于理科或严谨的文科评分，**倒扣分规则**（错别字、格式错误）应与得分规则同等重要。

## **2\. V2.0 UI 重构建议 (架构层面的改进)**

为了适配我们的 **Schema \-\> Prompt \-\> Logic** 架构，建议将 UI 划分为三个核心区域：**策略区**、**核心得分点区**、**全局约束区**。

### **区域 A：评分策略配置 (Strategy Zone)**

将原本简单的下拉菜单升级为“评分模式选择器”，直接决定后续 UI 的形态。

* **模式 1：累加计分 (Accumulative)** —— 适用于理科步骤、文科采点。  
  * *配置:* 满分上限、是否允许超分。  
* **模式 2：等级量表 (Rubric)** —— 适用于作文、论述。  
  * *配置:* 维度（内容/结构）、等级（A/B/C/D）。  
* **模式 3：逻辑命中 (Logic Match)** —— 适用于“任选 N 点”或“多选多”。  
  * *保留你现有的设计:* “命中任意 \[3\] 个点，每点 \[2\] 分，封顶 \[6\] 分”。

### **区域 B：核心得分点 (The "Checkpoints") —— 核心改动**

这是 AI 生成 Prompt 的核心数据源。建议将单行列表项扩展为 **卡片式 (Card)** 或 **高级行 (Advanced Row)**。

**每个得分点 (Item) 应包含：**

1. **核心语义 (Semantic Anchor):**  
   * *UI:* 文本域。  
   * *作用:* AI 用来判断 True/False 的依据。  
   * *例子:* "科技创新与经济深度融合"。  
2. **同义词/允许的表述 (Alternatives):** (可选，高级折叠项)  
   * *UI:* Tag 输入框。  
   * *例子:* \[产学研结合\] \[科技转化\] \[生产力提升\]。  
3. **独立分值 (Override Score):**  
   * *UI:* 数字输入框。  
   * *逻辑:* 默认继承全局“每点分值”，但允许手动覆盖（例如核心点给 3 分，次要点给 1 分）。  
4. **必须包含 (Mandatory):**  
   * *UI:* 勾选框。  
   * *逻辑:* 如果此点未命中，该题直接 0 分（关键步骤缺失）。

### **区域 C：全局约束与后处理 (Constraints & Post-processing)**

将底部的“补充规则”升级为独立的“扣分/惩罚器”。

* **UI 形态:** 预设规则库 \+ 自定义规则。  
* **规则类型:**  
  * Format Error: 缺少单位、未保留小数位 (扣 N 分)。  
  * Keyword Missing: 缺少关键术语 (扣 N 分)。  
  * Length Check: 字数不足 (扣 N 分)。

## **3\. 改进后的 UI 布局示意图 (Mockup Logic)**

\+---------------------------------------------------------------+  
| \[ 题目信息区 (只读) \]                                          |  
\+---------------------------------------------------------------+  
|                                                               |  
|  评分模式: \[ 🔘 采点得分 (Hit Points) \]  \[   等级量表   \]       |  
|                                                               |  
|  \-----------------------------------------------------------  |  
|  \[计算逻辑\]                                                    |  
|  规则: 命中下方任意 \[ 3 \] 个得分点，即可得满分。                  |  
|  每点基准分: \[ 2 \] 分   |   总分上限: \[ 6 \] 分                  |  
|  \[ \] 开启模糊匹配 (允许学生用不同措辞表达相同含义)                |  
|  \-----------------------------------------------------------  |  
|                                                               |  
|  \[核心得分点列表\]                                              |  
|                                                               |  
|  1\. \[ 核心概念: 科技投入 \] \----------------------- \[ 2 分 \]    |  
|     (AI 提示: 学生提到加大资金、资源投入即可)                     |  
|     \[x\] 必须命中 (Key Step)                                    |  
|                                                               |  
|  2\. \[ 核心概念: 经济融合 \] \----------------------- \[ 2 分 \]    |  
|     (AI 提示: 关键词包括产学研、转化、生产力)                     |  
|                                                               |  
|  3\. \[ 核心概念: 国际合作 \] \----------------------- \[ 2 分 \]    |  
|     (AI 提示: 提到一带一路、对外交流、引进技术)                   |  
|                                                               |  
|  \[ \+ 添加得分点 \]                                              |  
|                                                               |  
|  \-----------------------------------------------------------  |  
|  \[全局扣分项 (Negative Rules)\]                                 |  
|  (x) 错别字: 每处扣 \[0.5\] 分，最多扣 \[2\] 分                      |  
|  ( ) 关键史实错误: 直接 0 分                                    |  
|                                                               |  
\+---------------------------------------------------------------+  
|              \[ 💾 保存并测试 AI 评分 \]                         |  
\+---------------------------------------------------------------+

## **4\. 数据结构映射 (Schema Mapping)**

你的 UI 改动将直接对应后台的 JSON Schema，这决定了 AI Prompt 怎么写。

**改进后的 JSON 结构示例:**

{  
  "strategy": "select\_n\_points",  
  "config": {  
    "target\_count": 3,  
    "base\_score": 2,  
    "max\_score": 6,  
    "fuzzy\_match": true  
  },  
  "points": \[  
    {  
      "id": "p1",  
      "concept": "加强科技创新投入",  
      "ai\_hint": "学生提到加大资金、资源投入即可",  
      "score\_override": null, // 继承基准分  
      "is\_mandatory": false  
    },  
    {  
      "id": "p2",  
      "concept": "推动科技与经济深度融合",  
      "keywords": \["产学研", "转化"\],  
      "score\_override": null,  
      "is\_mandatory": false  
    }  
  \],  
  "constraints": \[  
    {  
      "type": "typo\_check",  
      "penalty\_per\_error": 0.5,  
      "max\_penalty": 2  
    }  
  \]  
}

## **5\. 交互建议**

1. **AI 预填充 (AI-Prefill):**  
   * 点击“生成评分细则”后，AI 应该分析**标准答案图片**，自动填好上面的“核心得分点列表”。  
   * **关键点:** 不要让老师从零开始打字。老师的工作应该是**Review (审核)** AI 提取的得分点是否合理，分值是否正确。  
2. **实时测试 (Dry Run):**  
   * 在保存之前，增加一个“测试”按钮。  
   * 允许老师输入一个简单的测试答案（如：“只回答了科技投入”），看系统会判几分。这能极大增加老师对 AI 评分的信任感。

---

## **6\. v3 UI 落地对齐（2026-02-06）**

### **6.1 评分结构选择器**
- 顶部新增 **评分结构**：`得分点累加 / 步骤逻辑 / 维度矩阵`。
- 切换后自动启用对应编辑器，避免 UI 混杂。

### **6.2 三种编辑器落地**
- **PointAccumulationEditor**：卡片流 + 折叠，支持关键词与分值编辑。  
- **SequentialLogicEditor**：步骤顺序 + 严格顺序开关。  
- **RubricMatrixEditor**：维度/等级矩阵，支持权重与等级描述。  

### **6.3 模板与推荐入口**
- 编辑页支持 **另存为模板** 与 **模板推荐**。
- 规则库新增 **模板库入口**（我的模板/系统模板/最近使用）。

### **6.4 低置信度介入**
- 批改结果加入 `confidence` 与 `needsReview` 标记。  
- 自动模式下低置信度直接暂停，进入人工确认。  
