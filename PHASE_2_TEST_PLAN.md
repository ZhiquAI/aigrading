# Phase 2 - V2 UI 功能完整性验证计划

> **时间**: 2026-01-26  
> **目标**: 验证V2 UI在Chrome扩展环境中的所有核心功能  
> **状态**: 🚀 进行中

---

## 📋 测试前提条件

### ✅ 已完成
- [x] Phase 1 代码清理完成
- [x] 生产构建成功 (`npm run build`)
- [x] dist/ 目录生成正确
- [x] 本地HTTP服务器启动 (http://localhost:8888)
- [x] 唯一入口: v2.html

### ⚙️ 需要准备
- [ ] 在Chrome中加载扩展: `chrome://extensions/`
- [ ] 开启"开发者模式"
- [ ] 点击"加载已解压的扩展程序"
- [ ] 选择: `/Users/hero/Desktop/ai-grading/aigradingfrontend/dist/`

---

## 🧪 测试场景

### **场景 1: 初始化与启动** 
**目标**: 验证扩展能正确加载和初始化

| 测试项 | 预期结果 | 状态 | 备注 |
|--------|----------|------|------|
| 点击扩展icon | 侧边栏打开，显示V2 UI | ⏳ | - |
| 首次加载 | 不出现闪烁或错误 | ⏳ | - |
| 初始页面 | 显示"智能阅卷"标签页 | ⏳ | 应该自动切到首页 |
| 导航栏 | 5个tab清晰可见 | ⏳ | 批改、考试、记录、分析、设置 |
| 无错误警告 | 控制台无红色错误 | ⏳ | F12查看Console |

---

### **场景 2: 题号识别与细则加载**
**目标**: 验证自动题号检测和细则关联

| 测试项 | 预期结果 | 状态 | 备注 |
|--------|----------|------|------|
| 打开答题界面 | 自动检测页面题号 | ⏳ | 需在智学网/好分数中测试 |
| 页面切换 | 题号更新时自动刷新 | ⏳ | 2.5秒检测周期 |
| 手动选择题号 | 支持输入或下拉选择 | ⏳ | 检查题号输入框 |
| 细则自动加载 | 切换题号时加载对应细则 | ⏳ | 如之前保存过 |
| 细则编辑 | 能打开细则编辑器 | ⏳ | 检查"编辑细则"按钮 |

---

### **场景 3: AI 评分**
**目标**: 验证批改功能和评分结果

| 测试项 | 预期结果 | 状态 | 备注 |
|--------|----------|------|------|
| 上传答卷图片 | 识别并显示答题内容 | ⏳ | 需真实图片 |
| 选择评分策略 | 3种模式可切换 (快速/精准/深度) | ⏳ | 检查下拉菜单 |
| 点击"开始批改" | 显示加载中状态 | ⏳ | 应有动画或进度 |
| 获得评分结果 | 显示分数、点评、细则对应 | ⏳ | 结果准确性 |
| 额度扣费 | 用户额度正确减少 | ⏳ | 检查左上角额度显示 |
| 错误处理 | API故障时显示重试 | ⏳ | 模拟网络错误 |

---

### **场景 4: 历史记录查询**
**目标**: 验证记录列表和数据展示

| 测试项 | 预期结果 | 状态 | 备注 |
|--------|----------|------|------|
| 打开"阅卷记录" | 显示历史评分列表 | ⏳ | 需要之前有评分 |
| 列表内容 | 题号、分数、时间清晰 | ⏳ | 数据格式正确 |
| 搜索功能 | 能按题号或时间筛选 | ⏳ | 搜索框可用性 |
| 导出功能 | 支持导出为Excel/PDF | ⏳ | 检查导出按钮 |
| 删除记录 | 可删除单条或批量删除 | ⏳ | 确认对话框出现 |

---

### **场景 5: 考试管理**
**目标**: 验证考试信息和题目列表

| 测试项 | 预期结果 | 状态 | 备注 |
|--------|----------|------|------|
| 打开"考试管理" | 显示考试列表 | ⏳ | 如果有历史数据 |
| 创建考试 | 支持新增考试信息 | ⏳ | 检查"新增"按钮 |
| 编辑考试 | 能修改考试名称、科目等 | ⏳ | 编辑对话框 |
| 题目列表 | 显示该考试的所有题目 | ⏳ | 子列表展开 |
| 删除考试 | 支持删除（需确认） | ⏳ | 数据删除逻辑 |

---

### **场景 6: 数据分析仪表盘**
**目标**: 验证统计图表和分析功能

| 测试项 | 预期结果 | 状态 | 备注 |
|--------|----------|------|------|
| 打开"考情分析" | 显示仪表盘和图表 | ⏳ | 有数据时才显示 |
| 统计图表 | 成绩分布、答题分析、效率统计 | ⏳ | Chart.js正常渲染 |
| 时间筛选 | 支持按日期范围筛选 | ⏳ | 日期选择器可用 |
| 数据准确性 | 统计数据与历史记录一致 | ⏳ | 验证计算逻辑 |
| 报告导出 | 支持导出分析报告 | ⏳ | PDF格式 |

---

### **场景 7: 系统设置**
**目标**: 验证配置和偏好设置

| 测试项 | 预期结果 | 状态 | 备注 |
|--------|----------|------|------|
| 打开"系统设置" | 显示完整设置菜单 | ⏳ | 分类清晰 |
| API配置 | 支持配置Gemini API Key | ⏳ | 加密存储 |
| 评分偏好 | 支持调整评分策略、语气等 | ⏳ | 下拉菜单可用 |
| 数据管理 | 支持导出/导入本地数据 | ⏳ | 备份功能 |
| 关于页面 | 显示版本号和说明 | ⏳ | 信息完整 |
| 设置保存 | 刷新后设置持久化 | ⏳ | localStorage检查 |

---

### **场景 8: 响应式设计**
**目标**: 验证在Chrome侧边栏中的显示效果

| 测试项 | 预期结果 | 状态 | 备注 |
|--------|----------|------|------|
| 正常宽度 (376px) | 界面完整，无溢出 | ⏳ | 标准侧边栏宽度 |
| 窄屏 (280px) | 导航优化，按钮文本隐藏 | ⏳ | 响应式处理 |
| 高度变化 | 内容能滚动，无截断 | ⏳ | 可滚动区域工作 |
| 字体大小 | 所有文字清晰可读 | ⏳ | 无模糊或重叠 |
| 颜色对比 | 深色/浅色模式可切换 | ⏳ | 检查主题切换 |

---

### **场景 9: 性能和稳定性**
**目标**: 验证加载速度和内存占用

| 测试项 | 预期结果 | 状态 | 备注 |
|--------|----------|------|------|
| 初始加载 | < 2秒 | ⏳ | F12 Network选项卡 |
| 路由切换 | < 500ms | ⏳ | 标签页间的切换速度 |
| 内存占用 | < 100MB | ⏳ | Chrome任务管理器 |
| 长时间运行 | 无内存泄漏 | ⏳ | 运行30分钟观察 |
| 没有卡顿 | UI响应流畅 | ⏳ | 60 FPS理想 |

---

### **场景 10: 错误处理与恢复**
**目标**: 验证异常情况的容错能力

| 测试项 | 预期结果 | 状态 | 备注 |
|--------|----------|------|------|
| API超时 | 显示友好的"重试"提示 | ⏳ | 不是红色错误 |
| 网络断开 | 显示离线提示，功能暂停 | ⏳ | 网络恢复后自动同步 |
| 无权限 | 显示"需要激活"或"需要购买" | ⏳ | 激活页面出现 |
| 数据损坏 | 自动回退到默认值 | ⏳ | 不崩溃 |
| 浏览器刷新 | 扩展状态保留，不丢失 | ⏳ | localStorage恢复 |

---

## 🎯 关键验收标准

### ✅ 必须通过
- [ ] 扩展在Chrome中正常加载，无红色错误
- [ ] 所有5个导航标签页都能切换
- [ ] 至少能完成一次完整的批改流程（题号→细则→批改→结果）
- [ ] 记录能正确保存和显示
- [ ] 设置能正确保存和恢复

### ⚠️ 可接受的缺陷
- [ ] 某些API调用失败（可降级到备用平台）
- [ ] 分析图表暂时没有数据显示
- [ ] 一些高级功能未完全实现

### ❌ 不可接受
- [ ] 扩展完全无法加载
- [ ] 导航栏损坏
- [ ] 基础批改流程中断
- [ ] 频繁崩溃或白屏

---

## 📝 测试记录表

### 测试环境
- **Chrome版本**: `待填`
- **测试日期**: `待填`
- **测试人员**: `待填`
- **测试设备**: Mac Mini

### 发现的问题

| ID | 严重级别 | 问题描述 | 重现步骤 | 状态 |
|-------|----------|--------|----------|------|
| BUG-01 | 🔴 | 待补充 | 待补充 | ⏳ |
| BUG-02 | 🟡 | 待补充 | 待补充 | ⏳ |
| ...   | ... | ... | ... | ... |

---

## 📊 测试完成进度

```
初始化与启动           [████░░░░░░] 40%
题号识别与细则加载     [░░░░░░░░░░] 0%
AI评分               [░░░░░░░░░░] 0%
历史记录查询         [░░░░░░░░░░] 0%
考试管理             [░░░░░░░░░░] 0%
数据分析             [░░░░░░░░░░] 0%
系统设置             [░░░░░░░░░░] 0%
响应式设计           [░░░░░░░░░░] 0%
性能稳定性           [░░░░░░░░░░] 0%
错误处理             [░░░░░░░░░░] 0%

总体进度: [█░░░░░░░░░] 10%
```

---

## 🚀 下一步行动

1. **立即**: 在Chrome中加载扩展（dist目录）
2. **验证**: 运行上述10个测试场景
3. **记录**: 填写问题表和进度表
4. **反馈**: 汇总结果，优先修复关键缺陷
5. **迭代**: Phase 3灰度发布

---

## 📞 疑问排查

### Q: 如何在Chrome中加载本地扩展?
```
1. 打开 chrome://extensions/
2. 打开右上角的"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择 dist/ 目录（编译后的文件）
```

### Q: 如何查看扩展日志?
```
1. 按F12打开开发者工具
2. 选择"Console"标签页
3. 查看是否有红色错误信息
```

### Q: 如何测试离线模式?
```
1. F12 → Network → 下拉改为"Offline"
2. 操作扩展，观察是否有离线提示
3. 改回Online，确认自动恢复
```

---

**最后更新**: 2026-01-26 14:45  
**状态**: 🚀 准备就绪，等待Phase 2开始
