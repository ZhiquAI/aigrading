# ✅ Phase 2 - 立即执行指南

> 时间: 2026-01-26  
> 状态: 🚀 **现在可以进行Chrome测试！**

---

## 🎯 快速验证结果

✅ **验证通过**: 21/22 项 (95%)

| 检查项 | 状态 | 详情 |
|--------|------|------|
| 构建产物 | ✅ | v2.html、manifest.json、assets 完整 |
| 配置文件 | ✅ | side_panel 正确指向 v2.html |
| 源代码 | ✅ | V1入口已删除，V2入口存在 |
| 依赖项 | ✅ | React、Zustand、Vite 都已安装 |
| 本地服务器 | ✅ | localhost:8888 运行正常 |
| HTML有效性 | ✅ | React root 容器、脚本加载都正确 |

**⚠️ 备注**: 仅有1个非关键项缺失（index.css → assets中已包含）

---

## 🔥 立即开始Phase 2测试

### 第一步：在Chrome中加载扩展

```bash
1️⃣ 打开Chrome浏览器

2️⃣ 访问: chrome://extensions/

3️⃣ 打开右上角的 "开发者模式" 开关
   (Developer mode toggle)

4️⃣ 点击左上角 "加载已解压的扩展程序" 按钮
   (Load unpacked)

5️⃣ 选择以下目录：
   /Users/hero/Desktop/ai-grading/aigradingfrontend/dist/

6️⃣ 确认弹窗，等待加载完成

✅ 看到扩展卡片出现，说明加载成功！
```

### 第二步：打开并测试扩展

```bash
1️⃣ 在Chrome工具栏找到 "AI 智能阅卷助手" 图标

2️⃣ 点击图标打开侧边栏
   (在网页右侧出现侧面板)

3️⃣ 观察：
   ✅ 侧面板正确显示
   ✅ 导航栏有5个标签页（批改、考试、记录、分析、设置）
   ✅ 没有明显的错误提示

4️⃣ 按F12打开开发者工具 → Console 标签页
   检查是否有红色错误信息

5️⃣ 如果Console有错误，记录错误信息用于调试
```

---

## 🧪 关键功能快速测试

### ✅ 测试 1: 初始化（必做，2分钟）

| 步骤 | 操作 | 预期结果 | ✓/✗ |
|------|------|----------|------|
| 1 | 点击扩展icon | 侧面板打开 | ? |
| 2 | 查看导航栏 | 看到5个按钮 | ? |
| 3 | 查看主页 | "智能阅卷"标签选中 | ? |
| 4 | F12看Console | 没有红色错误 | ? |
| 5 | 点击其他标签 | 能切换，无报错 | ? |

**✅ 若5/5通过，则初始化验证成功！**

---

### ✅ 测试 2: 响应式设计（2分钟）

```
测试侧面板在不同宽度下的表现:

1. 正常宽度 (376px - Chrome默认)
   ✓ 界面完整
   ✓ 文字清晰
   ✓ 按钮可点击

2. 缩小侧面板 (≈300px)
   ✓ 导航栏优化
   ✓ 文字不重叠
   ✓ 能滚动

3. 高度变化
   ✓ 内容能上下滚动
   ✓ 没有截断
```

---

### ✅ 测试 3: 系统设置（3分钟）

```
步骤:
1. 点击"设置"标签页
2. 检查是否显示设置菜单
3. 尝试修改某个设置（如API Key）
4. 刷新扩展（F5或重新点击icon）
5. 检查设置是否被保留

预期: 设置在刷新后保持不变 ✓
```

---

### ✅ 测试 4: 错误处理（2分钟）

```
测试离线模式:

1. 按F12打开Developer Tools
2. 进入Network选项卡
3. 找到右上角的"No throttling"下拉菜单
4. 选择"Offline"
5. 在扩展中尝试进行API调用
6. 观察是否有友好的错误提示

预期: 显示"网络错误"或"请重试" 而不是红色崩溃 ✓
```

---

## 📊 分阶段测试时间表

| 阶段 | 测试内容 | 预计时间 | 优先级 |
|------|----------|----------|--------|
| **即刻** | 初始化 + 响应式 | 5分钟 | 🔴 必做 |
| **15分钟内** | 设置、导航、错误处理 | 10分钟 | 🔴 必做 |
| **30分钟内** | 记录、分析基本操作 | 15分钟 | 🟡 推荐 |
| **1小时内** | 完整的批改流程 | 30分钟 | 🟡 推荐 |
| **稍后** | 深度功能 + 性能测试 | 不限 | 🟢 可选 |

---

## 🐛 如果遇到问题...

### 问题 1: 扩展无法加载或立即崩溃

```
症状: "Could not load extension" 错误

解决:
1. 检查dist目录是否存在
2. 尝试重新编译: npm run build
3. 检查manifest.json是否有效JSON格式
4. 重启Chrome
```

### 问题 2: 侧面板显示空白/错误

```
症状: 侧面板一片白，或显示错误堆栈

解决:
1. F12查看Console标签页
2. 查看具体的红色错误信息
3. 通常是API Key相关或localStorage问题
4. 清除扩展存储: 
   右键扩展 → 清除数据 → 刷新
```

### 问题 3: 功能无法使用（如无法批改）

```
症状: 点击按钮没反应或显示"undefined is not a function"

解决:
1. 检查Console有无错误
2. 确保API配置正确（设置页面）
3. 检查网络连接
4. 尝试卸载重新加载扩展
```

### 问题 4: 数据持久化失败

```
症状: 设置/记录在刷新后丢失

解决:
1. F12 → Application → Local Storage
2. 检查是否有chrome-extension://... 的数据
3. 如果没有，说明数据没有被保存
4. 检查App.tsx中的storage.setItem调用

处理:
等待Phase 3后端集成，现在主要是本地存储测试
```

---

## ✨ 成功标志

### ✅ Phase 2 通过的标志

**最低标准（必须）:**
- ✅ 扩展能在Chrome中加载
- ✅ 侧面板能打开和关闭
- ✅ 5个导航标签都能切换
- ✅ 没有红色JavaScript错误
- ✅ 刷新后扩展不会崩溃

**理想标准（推荐）:**
- ✅ 初始化 + 响应式 + 设置 完全通过
- ✅ 至少有一个功能（如记录查询）能工作
- ✅ 错误处理显示友好提示而不是报错
- ✅ 数据在刷新后能保留

**完美标准（如果达到）:**
- ✅ 所有10个测试场景都通过
- ✅ 完整的批改流程能工作
- ✅ 性能流畅，无卡顿

---

## 📝 实时记录模板

在进行测试时，请记录以下信息：

```markdown
## Phase 2 测试记录 - [日期]

### 测试环境
- Chrome版本: [例: 127.0.1234]
- 系统: macOS
- 扩展版本: 1.0
- 测试时间: [开始时间] ~ [结束时间]

### 初始化测试 (必做)
- [ ] 扩展加载成功
- [ ] 侧面板打开正常
- [ ] 导航栏显示完整
- [ ] Console无红色错误

### 关键问题
- 问题1: [描述] → [重现步骤] → [截图/日志]
- 问题2: [描述] → [重现步骤] → [截图/日志]

### 总体评价
- 整体可用性: [ ] 优 [ ] 良 [ ] 中 [ ] 差
- 建议: [自由填写]

### 下一步
- [ ] 需要修复的问题
- [ ] 进行Phase 3
```

---

## 🚀 立即行动清单

```
现在就可以做:
☐ 在Chrome中加载dist目录
☐ 打开扩展，看看初始界面
☐ 点击5个标签页，检查是否能切换
☐ 按F12查看Console有没有错误
☐ 打开设置，修改一个项目，刷新后检查是否保留

预计花费时间: 5-10分钟
预期结果: 基本功能验证通过 ✅
```

---

## 📞 常见问题速查表

| 问题 | 快速检查 | 解决方案 |
|------|----------|----------|
| 扩展无法加载 | dist/manifest.json 存在? | 重新 npm run build |
| 侧面板空白 | F12 Console有错误? | 查看具体错误信息 |
| 功能不工作 | API配置正确? | 检查设置页面 |
| 数据丢失 | 刷新后数据消失? | 这是正常的，等Phase 3 |
| 卡顿/缓慢 | Chrome任务管理器占用高? | 可能是大数据操作 |

---

## ✅ 检查清单（复制粘贴使用）

### 预检查 (在测试前)
- [ ] npm run build 成功
- [ ] dist/v2.html 存在
- [ ] dist/manifest.json 有效
- [ ] 本地服务器运行: localhost:8888
- [ ] Chrome已关闭所有扩展开发标签

### 加载步骤
- [ ] chrome://extensions 打开
- [ ] 开发者模式 已打开
- [ ] 选择dist目录 已确认
- [ ] 扩展卡片 可见

### 初始化测试
- [ ] 侧面板打开
- [ ] 导航栏显示
- [ ] Console无错误
- [ ] 能切换标签

### 快速功能测试
- [ ] 设置可保存
- [ ] 响应式正常
- [ ] 错误处理友好
- [ ] 刷新不崩溃

---

**现在就开始吧！祝你测试顺利！🎉**

---

**最后更新**: 2026-01-26 15:00  
**下一步**: 完成Phase 2后，提交Phase 3计划
